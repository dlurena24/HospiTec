<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hospital TECnológico</title>
    <link rel="stylesheet" href="addPacient.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <!--Espacio donde se crea el formulario para crear la cuenta del paciente-->
    <div class="from-box">
        <form id="formulario-1">
            
            <h1>Agregar paciente</h1>
            
            <!--Recolección de datos del usuario-->
            <div class="input-box">
                <input type="text" placeholder="Nombre del paciente" id="NomPaciente" name = "NomPaciente">
            </div>

            <div class="input-box">
                <input type="text" placeholder="Primer apellido del paciente" id="PrimerApPac" name = "PrimerApPac">
            </div>

            <div class="input-box">
                <input type="text" placeholder="Segundo apellido del paciente" id="SegundoApPac" name = "SegundoApPac">
            </div>

            <div class="input-box">
                <input type="int" placeholder="Cédula" id="Cedula" name = "Cedula">
            </div>

            <div class="input-box">
                <input type="text" placeholder="Fecha de nacimiento" id="FechaNac" name = "FechaNac">
            </div>

            <div class="input-box">
                <input type="text" placeholder="Contraseña" id="Contrasena" name = "Contrasena">
            </div>

            <div class="input-box">
                <input type="int" placeholder="Teléfono" id="Telefono" name = "Telefono">
            </div>

            <div class="input-box">
                <input type="text" placeholder="Dirección" id="Direccion" name = "Direccion">
            </div>

            <div class="input-box">
                <input type="text" placeholder="Patología" id="Patologia" name = "Patologia">
            </div>

            <div class="input-box">
                <input type="text" placeholder="Tratamiento" id="Tratamiento" name = "Tratamiento">
            </div>

            <!--Botones de la página-->
            <button type="submit" class="advance-btn" id="Create_Btn"> AGREGAR </button>
            <button type="button" class="advance-btn" onclick="document.location='doctorHome.html'"> VOLVER</button>
        </form>
        <p id="respuesta-api"></p>
    </div>

    <!--Escaneo de datos para la elaboración del JSON-->
    <script>
        const formulario = document.getElementById("formulario-1");
        const respuestaApi = document.getElementById("respuesta-api");

        formulario.addEventListener("submit", event => {
        event.preventDefault();
        const nombre = document.getElementById("NomPaciente").value;
        const apellido1 = document.getElementById("PrimerApPac").value;
        const apellido2 = document.getElementById("SegundoApPac").value;
        const cedula = document.getElementById("Cedula").value;
        const fecha_nac = document.getElementById("FechaNac").value;
        const contrasena = document.getElementById("Contrasena").value;
        const telefono = document.getElementById("Telefono").value;
        const direccion = document.getElementById("Direccion").value;
        const patologia = document.getElementById("Patologia").value;
        const tratamiento = document.getElementById("Tratamiento").value;

        //Escritura en el documento .JSON
        fetch("https://localhost:7187/Paciente", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ Nombre: nombre , Apellido1: apellido1, Apellido2: apellido2, Cedula: cedula, Fecha_Nacimiento: fecha_nac, Contrasena: contrasena, Telefono: telefono, Direccion: direccion, Patologia: patologia, Tratamiento: tratamiento})
        })
        .then(response => response.json())
        .then(data => {
            respuestaApi.textContent = data.mensaje;
        });
        return;
        });

        

        /*function myFunction(){
            var x= document.getElementById("password1");
            var y= document.getElementById("hide1");
            var z= document.getElementById("hide2");
            var w= document.getElementById("password2");

            if(x.type === 'password'){
                x.type = "text";
                w.type = "text";
                y.style.display = "block";
                z.style.display = "none";
            }
            else{
                x.type = "password";
                w.type = "password";
                y.style.display = "none";
                z.style.display = "block";
            }

        }
        function Password(){
            const btnCreate = document.getElementById('Create_Btn');
            var pass_1 = document.getElementById("password1");
            var pass_2 = document.getElementById("password2");
            //
            if(pass_1.value === pass_2.value){
                if(pass_1.value.length < 8){
                    btnCreate.textContent = "Error, la contraseña debe ser mayor a 8 caracteres";
                }else{
                    document.location='addHystory.html'
                    
                }
            }else{
                btnCreate.textContent = "Error, las entradas no son iguales";
            }
            setTimeout(function() {
                    btnCreate.textContent = "Create Account"; // Change the text back to "Submit" after 2 seconds
                    }, 2000);


        }*/
    </script>
   
</body>

</html>